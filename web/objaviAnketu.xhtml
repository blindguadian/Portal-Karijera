<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>TODO supply a title</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"></link> 
        <f:metadata>
            <f:viewAction action="#{ucitajGrupeStudenata.sveGrupeGdeJeKorisnikClan()}"></f:viewAction>
            <f:viewAction action="#{dodavanjeAnkete.postaviPitanja()}"></f:viewAction>
        </f:metadata>
    </h:head>
    <h:body>
        <div>
            <h:form>
                
                Naslov: <h:inputText value="#{dodavanjeAnkete.nazivAnkete}"></h:inputText><br/>
                Dani trajanja: <h:inputText value="#{dodavanjeAnkete.daniTrajanjaAnkete}"></h:inputText><br/>
                Kome je namenjena anketa: <h:selectOneMenu value="#{dodavanjeAnkete.nivoVidljivosti}" id="nivoVidljivosti">
                    <f:selectItems value="#{dodavanjeAnkete.nivoiVidljivosti}" ></f:selectItems>
                    <f:ajax render="nazivGrupe"></f:ajax>
                </h:selectOneMenu><br/>
                <h:selectOneListbox value="#{dodavanjeAnkete.nazivGrupeStudenata}" rendered="#{dodavanjeAnkete.nivoVidljivosti == 'Formirana grupa studenata'}" id="nazivGrupe">
                    <f:selectItems value="#{ucitajGrupeStudenata.listaGrupaGdeJeKorisnikClan}" var="grupa" itemLabel="#{grupa.nazivGrupe}"></f:selectItems>

                </h:selectOneListbox>
                <h:messages style="color:red" for="porukaDodavanjeAnkete"></h:messages>
                <h:commandButton value="Objavi" action="#{dodavanjeAnkete.objaviAnketu()}"></h:commandButton>
                <br/>
                <h:outputText value="Pitanja">
                </h:outputText>
                <br/>
                
                
                    <ui:repeat value="#{dodavanjeAnkete.pitanjaAnkete}" var="values" varStatus="status">
                        Pitanje broj #{status.index + 1} <h:inputText value="#{dodavanjeAnkete.pitanjaAnkete[status.index]}"></h:inputText>
                        <h:commandButton  value="Remove" actionListener="#{dodavanjeAnkete.ukloniPitanje}">
                            <f:attribute name="index" value="#{status.index}" ></f:attribute>
                            <f:ajax render="@form"></f:ajax>
                        </h:commandButton> 
                        <br/>
                    </ui:repeat>
                    <h:commandButton value="Dodaj pitanje" actionListener="#{dodavanjeAnkete.dodajPitanje()}">
                        <f:ajax render="@form"></f:ajax>
                    </h:commandButton><br/>
                
            </h:form>
        </div>
    </h:body>
</html>
